{"ast":null,"code":"import _regeneratorRuntime from\"/home/brian/Desktop/non-functional-wa-connection-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/brian/Desktop/non-functional-wa-connection-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/brian/Desktop/non-functional-wa-connection-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from\"react\";import{Modal,Loading,FileUploader}from\"carbon-components-react\";import{changeNav as _changeNav}from\"./../store/actions/SideNavActions\";import{connect}from\"react-redux\";import{useFirebase}from\"react-redux-firebase\";import{useHistory}from\"react-router-dom\";function CreateNewContact(props){var firebase=useFirebase();var history=useHistory();var _useState=useState(\"file\"),_useState2=_slicedToArray(_useState,2),connectionState=_useState2[0],setConnectionState=_useState2[1];var _useState3=useState(\"uploading\"),_useState4=_slicedToArray(_useState3,2),fileStatus=_useState4[0],setFileStatus=_useState4[1];var handleModalClose=function handleModalClose(){props.changeNav(\"dashboard\");history.push(\"/app/dashboard\");};var handleFile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];_context.next=3;return firebase.uploadFile(\"user/\".concat(props.uid,\"/contacts\"),file).catch(function(err){return console.log(err);});case 3:setFileStatus(\"complete\");case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleFile(_x){return _ref.apply(this,arguments);};}();switch(connectionState){case\"loading\":return/*#__PURE__*/_jsx(Loading,{});case\"file\":return/*#__PURE__*/_jsxs(Modal,{onRequestClose:handleModalClose,onRequestSubmit:handleModalClose,open:true,modalHeading:/*#__PURE__*/_jsx(\"h2\",{children:\"Upload your csv\"}),primaryButtonText:\"Done\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Upload your csv here. Remember that the first column\\u2019s header must be \\u201Cphone\\u201D (without quotes) and all it\\u2019s cells must be user\\u2019s phone number with its country code (ex: 59594123456).\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(FileUploader,{filenameStatus:fileStatus,buttonLabel:\"Add file\",onChange:handleFile})})]});default:return null;}}var dispatchToProps=function dispatchToProps(dispatch){return{changeNav:function changeNav(elm){return dispatch(_changeNav(elm));}};};export default connect(null,dispatchToProps)(CreateNewContact);","map":{"version":3,"sources":["/home/brian/Desktop/non-functional-wa-connection-demo/src/pages/CreateNewContact.js"],"names":["React","useState","Modal","Loading","FileUploader","changeNav","connect","useFirebase","useHistory","CreateNewContact","props","firebase","history","connectionState","setConnectionState","fileStatus","setFileStatus","handleModalClose","push","handleFile","e","file","target","files","uploadFile","uid","catch","err","console","log","display","justifyContent","dispatchToProps","dispatch","elm"],"mappings":"ylBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,KAAT,CAAgBC,OAAhB,CAAyBC,YAAzB,KAA6C,yBAA7C,CACA,OAASC,SAAS,GAATA,CAAAA,UAAT,KAA0B,mCAA1B,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,WAAT,KAA4B,sBAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAC/B,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CAF+B,cAIeP,QAAQ,CAAC,MAAD,CAJvB,wCAIxBY,eAJwB,eAIPC,kBAJO,8BAKKb,QAAQ,CAAC,WAAD,CALb,yCAKxBc,UALwB,eAKZC,aALY,eAO/B,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7BP,KAAK,CAACL,SAAN,CAAgB,WAAhB,EACAO,OAAO,CAACM,IAAR,CAAa,gBAAb,EACD,CAHD,CAIA,GAAMC,CAAAA,UAAU,0FAAG,iBAAOC,CAAP,2HACXC,IADW,CACJD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CADI,uBAEXZ,CAAAA,QAAQ,CACXa,UADG,gBACgBd,KAAK,CAACe,GADtB,cACsCJ,IADtC,EAEHK,KAFG,CAEG,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAFH,CAFW,QAMjBX,aAAa,CAAC,UAAD,CAAb,CANiB,sDAAH,kBAAVG,CAAAA,UAAU,4CAAhB,CASA,OAAQN,eAAR,EACE,IAAK,SAAL,CACE,mBAAO,KAAC,OAAD,IAAP,CAEF,IAAK,MAAL,CACE,mBACE,MAAC,KAAD,EACE,cAAc,CAAEI,gBADlB,CAEE,eAAe,CAAEA,gBAFnB,CAGE,IAAI,KAHN,CAIE,YAAY,cAAE,uCAJhB,CAKE,iBAAiB,CAAC,MALpB,wBAOE,aAPF,cAQE,sOARF,cAaE,aAbF,cAcE,YAAK,KAAK,CAAE,CAAEa,OAAO,CAAE,MAAX,CAAmBC,cAAc,CAAE,QAAnC,CAAZ,uBACE,KAAC,YAAD,EACE,cAAc,CAAEhB,UADlB,CAEE,WAAW,CAAC,UAFd,CAGE,QAAQ,CAAEI,UAHZ,EADF,EAdF,GADF,CAwBF,QACE,MAAO,KAAP,CA9BJ,CAgCD,CAED,GAAMa,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,QAAD,CAAc,CACpC,MAAO,CACL5B,SAAS,CAAE,mBAAC6B,GAAD,QAASD,CAAAA,QAAQ,CAAC5B,UAAS,CAAC6B,GAAD,CAAV,CAAjB,EADN,CAAP,CAGD,CAJD,CAMA,cAAe5B,CAAAA,OAAO,CAAC,IAAD,CAAO0B,eAAP,CAAP,CAA+BvB,gBAA/B,CAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { Modal, Loading, FileUploader } from \"carbon-components-react\";\nimport { changeNav } from \"./../store/actions/SideNavActions\";\n\nimport { connect } from \"react-redux\";\nimport { useFirebase } from \"react-redux-firebase\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction CreateNewContact(props) {\n  const firebase = useFirebase();\n  const history = useHistory();\n\n  const [connectionState, setConnectionState] = useState(\"file\");\n  const [fileStatus, setFileStatus] = useState(\"uploading\");\n\n  const handleModalClose = () => {\n    props.changeNav(\"dashboard\");\n    history.push(\"/app/dashboard\");\n  };\n  const handleFile = async (e) => {\n    const file = e.target.files[0];\n    await firebase\n      .uploadFile(`user/${props.uid}/contacts`, file)\n      .catch((err) => console.log(err));\n\n    setFileStatus(\"complete\");\n  };\n\n  switch (connectionState) {\n    case \"loading\":\n      return <Loading />;\n\n    case \"file\":\n      return (\n        <Modal\n          onRequestClose={handleModalClose}\n          onRequestSubmit={handleModalClose}\n          open\n          modalHeading={<h2>Upload your csv</h2>}\n          primaryButtonText=\"Done\"\n        >\n          <br />\n          <p>\n            Upload your csv here. Remember that the first column’s header must\n            be “phone” (without quotes) and all it’s cells must be user’s phone\n            number with its country code (ex: 59594123456).\n          </p>\n          <br />\n          <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n            <FileUploader\n              filenameStatus={fileStatus}\n              buttonLabel=\"Add file\"\n              onChange={handleFile}\n            />\n          </div>\n        </Modal>\n      );\n    default:\n      return null;\n  }\n}\n\nconst dispatchToProps = (dispatch) => {\n  return {\n    changeNav: (elm) => dispatch(changeNav(elm)),\n  };\n};\n\nexport default connect(null, dispatchToProps)(CreateNewContact);\n"]},"metadata":{},"sourceType":"module"}
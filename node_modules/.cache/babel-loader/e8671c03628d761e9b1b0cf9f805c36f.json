{"ast":null,"code":"import _slicedToArray from\"/home/brian/Desktop/non-functional-wa-connection-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from\"react\";import{Modal,TextInput,Link,Loading,InlineNotification}from\"carbon-components-react\";import{useFirebase}from\"react-redux-firebase\";import{useHistory}from\"react-router-dom\";export default function Login(props){var firebase=useFirebase();var history=useHistory();var _useState=useState(\"login\"),_useState2=_slicedToArray(_useState,2),loginState=_useState2[0],setLoginState=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),emailWarn=_useState8[0],setEmailWarn=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),emailWarnText=_useState10[0],setEmailWarnText=_useState10[1];var handleMail=function handleMail(e){setEmailWarn(false);setEmail(e.target.value);};var handlePassword=function handlePassword(e){setPassword(e.target.value);};var handleClick=function handleClick(value){setLoginState(value);};var handleMailWarn=function handleMailWarn(text){setEmailWarn(true);setEmailWarnText(text);};var handleResetPassword=function handleResetPassword(){setLoginState(\"loading\");firebase.auth().sendPasswordResetEmail(email).then(function(){setLoginState(\"reset\");});};switch(loginState){case\"login\":return/*#__PURE__*/_jsxs(Modal,{shouldSubmitOnEnter:true,hasForm:true,onRequestSubmit:function onRequestSubmit(){if(email===\"\"){handleMailWarn(\"Your mail cannot be empty\");}else{handleClick(\"password\");}},open:true,modalHeading:/*#__PURE__*/_jsx(\"h2\",{children:\" Login\"}),primaryButtonText:\"Login\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Don't have an account yet? \"}),\" \",/*#__PURE__*/_jsx(Link,{children:\" Create my Connectivity's account\"}),/*#__PURE__*/_jsx(\"br\",{}),emailWarn?/*#__PURE__*/_jsx(InlineNotification,{title:emailWarnText,kind:\"warning\"}):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextInput,{onChange:handleMail,labelText:\"eMail\",placeholder:\"your@email.com\",value:email!==\"\"?email:null})]});case\"password\":return/*#__PURE__*/_jsxs(Modal,{open:true,hasForm:true,shouldSubmitOnEnter:true,modalHeading:/*#__PURE__*/_jsx(\"h2\",{children:\" Login\"}),primaryButtonText:\"Login\",secondaryButtonText:\"Back\",onSecondarySubmit:function onSecondarySubmit(){return handleClick(\"login\");},onRequestSubmit:function onRequestSubmit(){setLoginState(\"loading\");firebase.auth().signInWithEmailAndPassword(email,password).then(function(){history.push(\"/app\");}).catch(function(err){handleMailWarn(err.message);setLoginState(\"login\");});},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Login with \",email,\" account \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TextInput.PasswordInput,{onChange:handlePassword,id:\"password\",labelText:\"Password\"}),/*#__PURE__*/_jsx(Link,{onClick:handleResetPassword,children:\" Forgot my password \"})]});case\"loading\":return/*#__PURE__*/_jsx(Loading,{active:true});case\"reset\":return/*#__PURE__*/_jsxs(Modal,{open:true,shouldSubmitOnEnter:true,modalHeading:/*#__PURE__*/_jsx(\"h2\",{children:\" Login\"}),primaryButtonText:\"Login\",secondaryButtonText:\"Back\",onRequestSubmit:function onRequestSubmit(){return setLoginState(\"login\");},onSecondarySubmit:function onSecondarySubmit(){return setLoginState(\"login\");},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"We've sent an email to \",email,\" to reset your password. Check your spam folder if the mail doesn't appear\",\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});default:return null;}}","map":{"version":3,"sources":["/home/brian/Desktop/non-functional-wa-connection-demo/src/pages/Login.js"],"names":["React","useState","Modal","TextInput","Link","Loading","InlineNotification","useFirebase","useHistory","Login","props","firebase","history","loginState","setLoginState","email","setEmail","password","setPassword","emailWarn","setEmailWarn","emailWarnText","setEmailWarnText","handleMail","e","target","value","handlePassword","handleClick","handleMailWarn","text","handleResetPassword","auth","sendPasswordResetEmail","then","signInWithEmailAndPassword","push","catch","err","message"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Modal,\n  TextInput,\n  Link,\n  Loading,\n  InlineNotification,\n} from \"carbon-components-react\";\nimport { useFirebase } from \"react-redux-firebase\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function Login(props) {\n  const firebase = useFirebase();\n  const history = useHistory();\n\n  const [loginState, setLoginState] = useState(\"login\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const [emailWarn, setEmailWarn] = useState(false);\n  const [emailWarnText, setEmailWarnText] = useState(\"\");\n\n  const handleMail = (e) => {\n    setEmailWarn(false);\n    setEmail(e.target.value);\n  };\n\n  const handlePassword = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleClick = (value) => {\n    setLoginState(value);\n  };\n\n  const handleMailWarn = (text) => {\n    setEmailWarn(true);\n    setEmailWarnText(text);\n  };\n\n  const handleResetPassword = () => {\n    setLoginState(\"loading\");\n    firebase\n      .auth()\n      .sendPasswordResetEmail(email)\n      .then(() => {\n        setLoginState(\"reset\");\n      });\n  };\n\n  switch (loginState) {\n    case \"login\":\n      return (\n        <Modal\n          shouldSubmitOnEnter\n          hasForm\n          onRequestSubmit={() => {\n            if (email === \"\") {\n              handleMailWarn(\"Your mail cannot be empty\");\n            } else {\n              handleClick(\"password\");\n            }\n          }}\n          open\n          modalHeading={<h2> Login</h2>}\n          primaryButtonText=\"Login\"\n        >\n          <p>Don't have an account yet? </p>{\" \"}\n          <Link> Create my Connectivity's account</Link>\n          <br />\n          {emailWarn ? (\n            <InlineNotification title={emailWarnText} kind=\"warning\" />\n          ) : null}\n          <br />\n          <TextInput\n            onChange={handleMail}\n            labelText=\"eMail\"\n            placeholder={\"your@email.com\"}\n            value={email !== \"\" ? email : null}\n          />\n        </Modal>\n      );\n\n    case \"password\":\n      return (\n        <Modal\n          open\n          hasForm\n          shouldSubmitOnEnter\n          modalHeading={<h2> Login</h2>}\n          primaryButtonText=\"Login\"\n          secondaryButtonText=\"Back\"\n          onSecondarySubmit={() => handleClick(\"login\")}\n          onRequestSubmit={() => {\n            setLoginState(\"loading\");\n            firebase\n              .auth()\n              .signInWithEmailAndPassword(email, password)\n              .then(() => {\n                history.push(\"/app\");\n              })\n              .catch((err) => {\n                handleMailWarn(err.message);\n                setLoginState(\"login\");\n              });\n          }}\n        >\n          <p>Login with {email} account </p>\n          <br />\n          <br />\n          <TextInput.PasswordInput\n            onChange={handlePassword}\n            id=\"password\"\n            labelText=\"Password\"\n          />\n          <Link onClick={handleResetPassword}> Forgot my password </Link>\n        </Modal>\n      );\n\n    case \"loading\":\n      return <Loading active />;\n\n    case \"reset\":\n      return (\n        <Modal\n          open\n          shouldSubmitOnEnter\n          modalHeading={<h2> Login</h2>}\n          primaryButtonText=\"Login\"\n          secondaryButtonText=\"Back\"\n          onRequestSubmit={() => setLoginState(\"login\")}\n          onSecondarySubmit={() => setLoginState(\"login\")}\n        >\n          <p>\n            We've sent an email to {email} to reset your password. Check your\n            spam folder if the mail doesn't appear{\" \"}\n          </p>\n          <br />\n          <br />\n        </Modal>\n      );\n    default:\n      return null;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
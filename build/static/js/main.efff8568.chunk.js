(this["webpackJsonpwa-conection"]=this["webpackJsonpwa-conection"]||[]).push([[0],{458:function(e,t,n){},459:function(e,t,n){},497:function(e,t,n){"use strict";n.r(t);var c=n(15),a=n(4),s=n(0),r=n(71),i=n.n(r),o=n(538),d=n(6),l=n(510),u=n(27),j=n(19),b=n(505),h=n(506),O=n(507),x=n(508),p=n(509),f=n(511),v=n(512),m=n(513);var g=function(){var e=Object(u.g)(),t=Object(j.useFirebase)(),n=Object(s.useState)(!1),c=Object(d.a)(n,2),r=c[0],i=c[1],o=function(){i(!r)};return Object(a.jsxs)(b.a,{"aria-label":"Connectivity's",children:[Object(a.jsx)(h.a,{}),Object(a.jsxs)(O.a,{href:"/",prefix:"",children:[Object(a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 565 562",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M199.656 364.587C174.662 339.593 174.662 299.071 199.656 274.077C214.802 258.931 235.652 252.963 255.292 256.175C283.356 257.469 311.515 247.071 332.945 225.64C361.21 197.376 358.444 155.358 358.444 121.181C358.444 87.0043 362.893 55.686 387.393 31.186C427.812 -9.23323 493.344 -9.23323 533.764 31.186C574.183 71.6053 574.183 137.138 533.764 177.557C509.922 201.399 487.231 206.892 446.333 206.892C405.434 206.892 367.735 202.165 338.602 231.297C317.172 252.727 307.104 281.217 308.398 309.281C309.693 337.344 305.312 349.44 290.165 364.587C265.172 389.58 224.649 389.58 199.656 364.587Z",fill:"#F5F5F5"}),Object(a.jsx)("path",{d:"M59.7802 255.748C45.0113 256.835 30.5479 263.026 19.2548 274.319C-5.73872 299.312 -5.73872 339.835 19.2548 364.828C32.0219 377.595 48.8409 383.841 65.5723 383.565L65.3886 383.749C93.7247 385.884 121.449 397.726 142.999 419.276C164.883 441.16 176.756 469.413 178.618 498.207L178.702 498.124C178.792 514.383 185.04 530.614 197.446 543.019C222.439 568.013 262.962 568.013 287.955 543.019C312.949 518.026 312.949 477.503 287.955 452.51C280.312 444.866 272.399 440.489 261.557 436.592C250.715 432.695 197.916 426.109 173.758 401.952C127.481 355.674 127.481 280.644 173.758 234.367C198.544 209.581 250.832 204.669 264.028 199.836C277.223 195.002 283.046 191.547 290.784 183.809C315.777 158.816 315.777 118.293 290.784 93.2994C265.79 68.3059 225.268 68.3059 200.274 93.2994C188.981 104.593 182.791 119.056 181.703 133.825C181.471 165.042 169.512 196.186 145.827 219.872C122.142 243.557 90.9976 255.515 59.7802 255.748Z",fill:"#F5F5F5"}),Object(a.jsx)("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"358",y:"1",width:"201",height:"203",children:Object(a.jsx)("path",{d:"M458.5 0.999996C514.005 0.999998 559 46.4929 559 101.998V101.998C559 158.054 513.557 204 457.5 204L358 204L358 101.5C358 45.9954 402.995 0.999993 458.5 0.999996V0.999996Z",fill:"url(#paint0_radial)"})}),Object(a.jsx)("g",{mask:"url(#mask0)",children:Object(a.jsx)("path",{d:"M461.879 9.59603C514.718 9.59604 557.551 52.4297 557.551 105.268V105.268C557.551 158.106 514.717 200.94 461.879 200.94L366.208 200.94L366.208 105.268C366.208 52.4297 409.041 9.59603 461.879 9.59603V9.59603Z",fill:"#14FF00"})}),Object(a.jsx)("path",{d:"M397 165L405.758 132.902C400.354 123.506 397.514 112.855 397.519 101.933C397.535 67.7869 425.23 40.0005 459.26 40.0005C475.773 40.0057 491.274 46.4588 502.934 58.1672C514.589 69.8755 521.005 85.438 521 101.99C520.984 136.141 493.289 163.928 459.26 163.928C448.929 163.922 438.749 161.323 429.731 156.386L397 165ZM431.247 145.172C439.948 150.355 448.254 153.459 459.239 153.464C487.521 153.464 510.56 130.37 510.576 101.98C510.586 73.5317 487.656 50.4692 459.28 50.4588C430.977 50.4588 407.954 73.5526 407.943 101.938C407.938 113.527 411.323 122.204 417.007 131.282L411.821 150.282L431.247 145.172ZM490.361 116.714C489.977 116.068 488.949 115.683 487.402 114.907C485.86 114.131 478.275 110.386 476.858 109.87C475.446 109.355 474.418 109.094 473.385 110.646C472.357 112.193 469.398 115.683 468.5 116.714C467.602 117.745 466.699 117.875 465.157 117.099C463.615 116.323 458.642 114.693 452.75 109.417C448.166 105.313 445.066 100.245 444.168 98.6932C443.27 97.1463 444.075 96.3078 444.843 95.537C445.539 94.8442 446.385 93.7297 447.159 92.8234C447.942 91.9276 448.197 91.2817 448.716 90.2453C449.23 89.214 448.976 88.3078 448.586 87.5317C448.197 86.7609 445.113 79.1411 443.831 76.0422C442.575 73.0265 441.303 73.4328 440.358 73.3859L437.399 73.3338C436.371 73.3338 434.699 73.7192 433.287 75.2713C431.875 76.8234 427.888 80.563 427.888 88.1828C427.888 95.8026 433.417 103.162 434.185 104.193C434.959 105.224 445.061 120.86 460.537 127.563C464.217 129.157 467.093 130.11 469.331 130.823C473.027 132 476.391 131.834 479.049 131.438C482.013 130.995 488.175 127.693 489.463 124.079C490.75 120.459 490.75 117.36 490.361 116.714Z",fill:"#333333"}),Object(a.jsx)("defs",{children:Object(a.jsxs)("radialGradient",{id:"paint0_radial",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(458.5 102.5) rotate(-180) scale(100.5 101.5)",children:[Object(a.jsx)("stop",{"stop-color":"#14FF00"}),Object(a.jsx)("stop",{offset:"0.0001","stop-color":"#14FF00","stop-opacity":"0.927083"}),Object(a.jsx)("stop",{offset:"0.9999","stop-color":"#14FF00","stop-opacity":"0"}),Object(a.jsx)("stop",{offset:"1","stop-color":"#14FF00","stop-opacity":"0"})]})})]}),"Connectivity's - WA Connection"]}),Object(a.jsx)(x.a,{children:Object(a.jsx)(p.a,{"aria-label":"User Avatar",onClick:o,children:Object(a.jsx)(l.b,{})})}),Object(a.jsx)(f.a,{expanded:r,children:Object(a.jsx)(v.a,{"aria-label":"Switcher Container",children:Object(a.jsx)(m.a,{onClick:function(){t.auth().signOut().then((function(){o(),e.push("/login")}))},"aria-label":"Log out",children:"Log out"})})})]})},C=n(514),y=n(515),T=n(545),S=n(543),k=n(518),E=n(520);function M(e){return{type:"CHANGE",data:"".concat(e)}}var A=n(516),w=n(62),I=n(285),N=n(519),D=n(521),L=n(20);var _=Object(L.b)((function(e){return{uid:e.firebase.auth.uid,isLoggedIn:e.firebase.auth.isEmpty,connections:e.firestore.ordered.connections,contacts:e.firestore.ordered.contacts,sideNav:e.sideNav.activeTab}}),(function(e){return{changeTab:function(t){e(M(t))}}}))((function(e){var t=Object(u.g)(),n=function(e){t.push("".concat(e))};return Object(j.useFirestoreConnect)([{collection:"user",doc:e.uid||"lala",subcollections:[{collection:"credentials"}],storeAs:"connections"},{collection:"user",doc:e.uid||"lala",subcollections:[{collection:"contacts"}],storeAs:"contacts"}]),Object(a.jsx)(s.Fragment,{children:Object(a.jsx)(C.a,{isFixedNav:!0,expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation",children:Object(a.jsxs)(y.a,{children:[Object(a.jsx)(T.a,{isActive:"dashboard"===e.sideNav,renderIcon:A.b,onClick:function(){e.changeTab("dashboard"),n("/app/dashboard")},children:"Dashboard"}),Object(a.jsx)(S.a,{}),Object(a.jsx)(T.a,{renderIcon:w.h,isActive:"send-text-message"===e.sideNav,onClick:function(){e.changeTab("send-text-message"),n("/app/send-text-message")},children:"Send text messages"}),Object(a.jsx)(T.a,{isActive:"send-media-message"===e.sideNav,renderIcon:I.a,onClick:function(){console.log("Closed feature"),e.changeTab("send-media-message"),n("/app/send-media-message")},children:"Send media messages"}),Object(a.jsx)(S.a,{}),Object(a.jsx)(k.a,{renderIcon:N.a,title:"Campaigns",children:Object(a.jsx)(E.a,{children:"Create new campaign"})}),Object(a.jsx)(S.a,{}),Object(a.jsxs)(k.a,{title:"WA - Connections",isActive:!1,renderIcon:D.a,children:[e.connections?e.connections.map((function(t,c){return Object(a.jsx)(E.a,{isActive:e.sideNav==="connection-status/".concat(t.id),onClick:function(){e.changeTab("connection-status/".concat(t.id)),n("/app/connection-status/".concat(t.id))},children:t.id},c)})):"",Object(a.jsx)(E.a,{isActive:"create-new-connection"===e.sideNav,onClick:function(){n("/app/create-new-connection"),e.changeTab("create-new-connection")},children:"Create new connection"})]}),Object(a.jsxs)(k.a,{title:"Contact lists",renderIcon:N.b,children:[e.contacts?e.contacts.map((function(t,c){return Object(a.jsx)(E.a,{isActive:e.sideNav==="contact-status/".concat(t.id),onClick:function(){e.changeTab("contact-status/".concat(t.id)),n("/app/contact-status/".concat(t.id))},children:t.id},c)})):"",Object(a.jsx)(E.a,{isActive:"create-new-contact"===e.sideNav,onClick:function(){n("/app/create-new-contact"),e.changeTab("create-new-contact")},children:"Create new contact list"})]})]})})})})),F=n(522),V=n(523),P=n(524);function R(e){return Object(a.jsx)("div",{className:"SimpleCard",children:Object(a.jsx)(F.a,{children:Object(a.jsx)(V.a,{children:Object(a.jsxs)(P.a,{children:[Object(a.jsx)("h2",{className:"title",children:e.title}),e.children]})})})})}function X(e){return e.col>1?Object(a.jsx)(F.a,{children:Object(a.jsxs)(V.a,{children:[Object(a.jsx)(P.a,{children:e.first}),Object(a.jsx)(P.a,{children:e.second})]})}):Object(a.jsx)(F.a,{children:Object(a.jsx)(V.a,{children:Object(a.jsx)(P.a,{children:e.children})})})}var B=n(525),U=n(526),z=n(527),H=n(544),q=n(528),W=n(529);var G=Object(L.b)((function(e){return{contacts:e.firestore.ordered.contacts,connections:e.firestore.ordered.connections,uid:e.firebase.auth.uid}}))((function(e){return Object(j.useFirestoreConnect)([{collection:"user",doc:e.uid,subcollections:[{collection:"contacts"}],storeAs:"contacts"},{collection:"user",doc:e.uid,subcollections:[{collection:"credentials"}],storeAs:"connections"}]),Object(a.jsxs)("div",{className:"dashboard",children:[Object(a.jsx)(X,{children:Object(a.jsx)(R,{title:"WA Connections",children:Object(a.jsxs)(B.a,{children:[Object(a.jsx)(U.a,{children:Object(a.jsxs)(z.a,{children:[Object(a.jsx)(H.a,{children:Object(a.jsx)("h5",{children:"Available Connections"})}),Object(a.jsx)(H.a,{children:Object(a.jsx)("h5",{children:"Status"})})]})}),Object(a.jsx)(q.a,{children:e.connections?e.connections.map((function(e,t){return Object(a.jsxs)(z.a,{children:[Object(a.jsx)(W.a,{children:e.id}),Object(a.jsx)(W.a,{children:" Online "})]},t)})):null})]})})}),Object(a.jsx)(X,{children:Object(a.jsx)(R,{title:"Contact lists",children:Object(a.jsxs)(B.a,{children:[Object(a.jsx)(U.a,{children:Object(a.jsxs)(z.a,{children:[Object(a.jsx)(H.a,{children:Object(a.jsx)("h5",{children:"List name"})}),Object(a.jsx)(H.a,{children:Object(a.jsx)("h5",{children:"Length"})}),Object(a.jsx)(H.a,{children:Object(a.jsx)("h5",{children:"Available variables"})})]})}),Object(a.jsx)(q.a,{children:e.contacts?e.contacts.map((function(e,t){return Object(a.jsxs)(z.a,{children:[Object(a.jsx)(W.a,{children:e.id}),Object(a.jsxs)(W.a,{children:[" ",e.length," "]}),Object(a.jsx)(W.a,{children:e.variables.toString()})]},t)})):null})]})})})]})})),J=n(540),Z=n(530),Q=n(531),Y=n(541),K=n(287);function $(e){var t=Object(j.useFirebase)(),n=Object(u.g)(),c=Object(s.useState)("login"),r=Object(d.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)(""),b=Object(d.a)(l,2),h=b[0],O=b[1],x=Object(s.useState)(""),p=Object(d.a)(x,2),f=p[0],v=p[1],m=Object(s.useState)(!1),g=Object(d.a)(m,2),C=g[0],y=g[1],T=Object(s.useState)(""),S=Object(d.a)(T,2),k=S[0],E=S[1],M=Object(s.useState)(!1),A=Object(d.a)(M,2),w=A[0],I=(A[1],Object(s.useState)("")),N=Object(d.a)(I,2),D=N[0],L=(N[1],function(e){o(e)}),_=function(e){y(!0),E(e)};switch(i){case"login":return Object(a.jsxs)(J.a,{shouldSubmitOnEnter:!0,hasForm:!0,onRequestSubmit:function(){""===h?_("Your mail cannot be empty"):L("password")},open:!0,modalHeading:Object(a.jsx)("h2",{children:" Login"}),primaryButtonText:"Login",children:[Object(a.jsx)("p",{children:"Don't have an account yet? "})," ",Object(a.jsx)(Z.a,{children:" Create my Connectivity's account"}),Object(a.jsx)("br",{}),C?Object(a.jsx)(Q.a,{title:k,kind:"warning"}):null,Object(a.jsx)("br",{}),Object(a.jsx)(Y.a,{onChange:function(e){y(!1),O(e.target.value)},labelText:"eMail",placeholder:"your@email.com",value:""!==h?h:null})]});case"password":return Object(a.jsxs)(J.a,{open:!0,hasForm:!0,shouldSubmitOnEnter:!0,modalHeading:Object(a.jsx)("h2",{children:" Login"}),primaryButtonText:"Login",secondaryButtonText:"Back",onSecondarySubmit:function(){return L("login")},onRequestSubmit:function(){o("loading"),t.auth().signInWithEmailAndPassword(h,f).then((function(){n.push("/app")})).catch((function(e){_(e.message),o("login")}))},children:[Object(a.jsxs)("p",{children:["Login with ",h," account "]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(Y.a.PasswordInput,{onChange:function(e){v(e.target.value)},id:"password",labelText:"Password",warn:w,warnText:D}),Object(a.jsx)(Z.a,{onClick:function(){o("loading"),t.auth().sendPasswordResetEmail(h).then((function(){o("reset")}))},children:" Forgot my password "})]});case"loading":return Object(a.jsx)(K.a,{active:!0});case"reset":return Object(a.jsxs)(J.a,{open:!0,shouldSubmitOnEnter:!0,modalHeading:Object(a.jsx)("h2",{children:" Login"}),primaryButtonText:"Login",secondaryButtonText:"Back",onRequestSubmit:function(){return o("login")},onSecondarySubmit:function(){return o("login")},children:[Object(a.jsxs)("p",{children:["We've sent an email to ",h," to reset your password. Check your spam folder if the mail doesn't appear"," "]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})}}var ee=n(500),te=n(532);var ne=Object(L.b)((function(e){return{uid:e.firebase.auth.uid,connections:e.firestore.ordered.connections,token:e.firebase.profile.token.token}}))((function(e){var t=Object(u.h)().id,n=Object(u.g)(),c=e.uid;Object(j.useFirestoreConnect)([{collection:"user",doc:c,subcollections:[{collection:"credentials"}],storeAs:"connections"}]);var s=e.connections.find((function(e){return e.id===t}));return s.user?Object(a.jsxs)("div",{className:"connection-status",children:[Object(a.jsx)(R,{title:s.id,children:Object(a.jsx)(X,{col:2,first:Object(a.jsxs)(B.a,{children:[Object(a.jsx)(U.a,{children:Object(a.jsx)(H.a,{children:Object(a.jsx)("h3",{children:"Connection's Info"})})}),Object(a.jsxs)(q.a,{children:[Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["Name: ",s.user.name]})}),Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["JID: ",s.user.jid]})})]}),Object(a.jsx)(U.a,{children:Object(a.jsx)(H.a,{children:Object(a.jsx)("h3",{children:"Device Info"})})}),Object(a.jsxs)(q.a,{children:[Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["Device manufacurer:",s.user.phone.device_manufacturer]})}),Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["Device model: ",s.user.phone.device_model]})}),Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["MCC: ",s.user.phone.mcc]})}),Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["MNC: ",s.user.phone.mnc]})}),Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["OS build number: ",s.user.phone.os_build_number]})}),Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["OS version: ",s.user.phone.os_version]})}),Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:["WA version: ",s.user.phone.wa_version]})})]})]}),second:Object(a.jsx)("img",{src:"".concat(s.user.imgUrl),style:{width:"100%"},alt:"Profile associated with this wa account"})})}),Object(a.jsx)(ee.a,{kind:"danger",renderIcon:te.a,onClick:function(){fetch("https://us-central1-connectivitys-2066c.cloudfunctions.net/api/deleteConnection/",{method:"POST",body:JSON.stringify({uid:e.uid,connectionName:s.id,token:e.token}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(n.push("/app/dashboard")).catch((function(){n.push("/app/dashboard")}))},children:"Delete connection"})]}):Object(a.jsx)(K.a,{})}));var ce=Object(L.b)((function(e){return{uid:e.firebase.auth.uid,contacts:e.firestore.ordered.contacts,token:e.firebase.profile.token.token}}))((function(e){var t=Object(u.h)().id,n=e.uid,c=Object(u.g)();Object(j.useFirestoreConnect)([{collection:"user",doc:n,subcollections:[{collection:"contacts"}],storeAs:"contacts"}]);var s=e.contacts.find((function(e){return e.id===t}));return Object(a.jsx)("div",{className:"contact-status",children:Object(a.jsxs)(R,{title:s.id,children:[Object(a.jsx)(X,{col:2,first:Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"This is a list with all your contact\u2019s available variables. To call them in the message, just type it\u2019s name inside curly braces."}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"If you call a variable that doesn\u2019t exists, \u201cundefined\u201d is going to appear on its place in the message."})]}),second:Object(a.jsxs)(B.a,{children:[Object(a.jsx)(U.a,{children:Object(a.jsx)(H.a,{children:Object(a.jsx)("h3",{children:"Available variables"})})}),Object(a.jsx)(q.a,{children:s.variables.map((function(e,t){return Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:[" ","{ ".concat(e," }")]})},t)}))}),Object(a.jsx)(U.a,{children:Object(a.jsx)(H.a,{children:Object(a.jsx)("h3",{children:"Contacts Available"})})}),Object(a.jsx)(q.a,{children:Object(a.jsx)(z.a,{children:Object(a.jsxs)(W.a,{children:[" ",s.length," contacts "]})})})]})}),Object(a.jsx)(ee.a,{onClick:function(){fetch("https://us-central1-connectivitys-2066c.cloudfunctions.net/api/deleteContact/",{method:"POST",body:JSON.stringify({uid:e.uid,contactName:t,token:e.token}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(c.push("/app/dashboard")).catch((function(){c.push("/app/dashboard")}))},kind:"danger",renderIcon:te.a,children:"Delete contact list"})]})})})),ae=n(13),se=n.n(ae),re=n(31),ie=n(7),oe=n(134),de=(n(447),n(283)),le=n(533),ue=n(539);function je(e){return{type:"CREATE_TEXT",data:e}}function be(e){return{type:"DELETE_TEXT",data:e}}function he(e){var t=e.length-1;return e.reduce((function(e,n,c){var a=function(e,t){return t.bold?""!==t.text?"".concat(e," *").concat(t.text,"*"):"".concat(e," ").concat(t.text):t.italic?""!==t.text?"".concat(e," _").concat(t.text,"_"):"".concat(e," ").concat(t.text):t.code?""!==t.text?e+"```"+t.text+"```":"".concat(e," ").concat(t.text):t.overline&&t.text?"".concat(e," ~").concat(t.text,"~"):"".concat(e," ").concat(t.text)};return c!==t?e+"".concat(n.children.reduce(a,"")," \n"):e+"".concat(n.children.reduce(a,""))}),"")}var Oe=Object(L.b)((function(e){return{textMessageVariants:e.textMessageVariants,contacts:e.firestore.ordered.contacts,connections:e.firestore.ordered.connections,uid:e.firebase.auth.uid}}),(function(e){return{createVariant:function(t){return e(je(t))},deleteVariant:function(t){return e(be(t))},deleteAll:function(){return e({type:"DELETE_ALL_TEXT"})}}}))((function(e){var t=Object(s.useMemo)((function(){return Object(oe.c)(Object(ie.h)())}),[]),n=Object(s.useState)(!1),r=Object(d.a)(n,2),i=r[0],o=r[1],l=function(){o(!i)},u=function(e){return Object(a.jsx)("p",Object(c.a)(Object(c.a)({},e.attributes),{},{children:e.children}))},j=Object(s.useCallback)((function(e){return e.element.type,Object(a.jsx)(u,Object(c.a)({},e))}),[]),b=function(e){var t=e.attributes,n=e.children,s=e.leaf;return s.bold&&(n=Object(a.jsx)("strong",{children:n})),s.code&&(n=Object(a.jsx)("code",{children:n})),s.italic&&(n=Object(a.jsx)("em",{children:n})),s.overline&&(n=Object(a.jsx)("strike",{children:n})),Object(a.jsx)("span",Object(c.a)(Object(c.a)({},t),{},{children:n}))},h=function(e){ie.g.insertText(t,e)},O=Object(s.useCallback)((function(e){return Object(a.jsx)(b,Object(c.a)({},e))}),[]),x=function(){return Object(a.jsxs)("div",{className:"ToolBar",children:[Object(a.jsx)(ue.a,{onChange:function(e){return h("{".concat(e.selectedItem,"}"))},size:"sm",type:"inline",items:e.variables,titleText:"Variables"}),Object(a.jsx)(ee.a,{renderIcon:le.a,kind:"ghost",hasIconOnly:!0,size:"small",iconDescription:"Bold",onClick:function(){var e=ie.a.nodes(t,{match:function(e){return e.bold}}),n=Object(d.a)(e,1)[0];ie.g.setNodes(t,{bold:!n},{match:function(e){return ie.f.isText(e)},split:!0})}}),Object(a.jsx)(ee.a,{renderIcon:le.b,kind:"ghost",hasIconOnly:!0,iconDescription:"Italic",size:"small",onClick:function(){var e=ie.a.nodes(t,{match:function(e){return e.italic}}),n=Object(d.a)(e,1)[0];ie.g.setNodes(t,{italic:!n},{match:function(e){return ie.f.isText(e)},split:!0})}}),Object(a.jsx)(ee.a,{renderIcon:le.c,kind:"ghost",hasIconOnly:!0,iconDescription:"Strike through",size:"small",onClick:function(){var e=ie.a.nodes(t,{match:function(e){return e.overline}}),n=Object(d.a)(e,1)[0];ie.g.setNodes(t,{overline:!n},{match:function(e){return ie.f.isText(e)},split:!0})}}),Object(a.jsx)(ee.a,{renderIcon:A.a,kind:"ghost",hasIconOnly:!0,iconDescription:"Monospace",size:"small",onClick:function(){var e=ie.a.nodes(t,{match:function(e){return e.code}}),n=Object(d.a)(e,1)[0];ie.g.setNodes(t,{code:!n},{match:function(e){return ie.f.isText(e)},split:!0})}}),Object(a.jsx)(ee.a,{renderIcon:N.c,kind:"ghost",iconDescription:"Emoji",hasIconOnly:!0,size:"small",onClick:l})]})};return Object(a.jsxs)("div",{className:"TextEditor",children:[e.open?Object(a.jsx)(x,{}):null,Object(a.jsx)("div",{className:"EmojiPicker",children:i?Object(a.jsx)(de.a,{title:"Connectivity's",perLine:8,showPreview:!1,onClick:function(e){h(e.native)}}):null}),Object(a.jsxs)("div",{className:"Main",children:[Object(a.jsx)(oe.b,{editor:t,value:e.textState,onChange:function(t){e.editVariant(e.editorIndex,{body:he(t),textState:t})},children:Object(a.jsx)(oe.a,{renderElement:j,renderLeaf:O})}),e.open?null:Object(a.jsx)(ee.a,{className:"DeleteButton",hasIconOnly:!0,renderIcon:te.b,onClick:function(){console.log(e.editorIndex),e.deleteVariant(e.editorIndex)},kind:"secondary",iconDescription:"Delete this variant"})]})]})}));function xe(e){return{type:"CREATE_MEDIA_TEXT",data:e}}function pe(e){return{type:"DELETE_MEDIA_TEXT",data:e}}function fe(e){return{type:"SET_MEDIA_TEXT_ACTIVE",data:e}}var ve=Object(L.b)(null,(function(e){return{createTextVariant:function(t){return e(je(t))},createMediaVariant:function(t){return e(xe(t))}}}))((function(e){return"text"===e.messageType?Object(a.jsx)("div",{className:"AddTextEditor",children:Object(a.jsx)(ee.a,{hasIconOnly:!0,onClick:function(){return e.createTextVariant({body:"",textState:[{type:"paragraph",children:[{text:"Write here your variant..."}]}],active:!0})},renderIcon:l.a,kind:"secondary",iconDescription:"Add new variant"})}):"media"===e.messageType?Object(a.jsx)("div",{className:"AddTextEditor",children:Object(a.jsx)(ee.a,{hasIconOnly:!0,onClick:function(){return e.createMediaVariant({body:"",textState:[{type:"paragraph",children:[{text:"Write here your variant..."}]}],active:!0})},renderIcon:l.a,kind:"secondary",iconDescription:"Add new variant"})}):void 0})),me=n(536),ge=n(537),Ce=n(517),ye=n(534),Te=n(535);var Se=Object(L.b)((function(e){return{contacts:e.firestore.ordered.contacts,connections:e.firestore.ordered.connections}}))((function(e){return Object(a.jsxs)("div",{className:"SelectConnection",children:[Object(a.jsx)("div",{style:{marginBottom:"1em"},children:Object(a.jsxs)(ye.a,{onChange:e.handleSelectConnection,defaultValue:"placeholder-item",hideLabel:!0,children:[Object(a.jsx)(Te.a,{disabled:!0,hidden:!0,value:"placeholder-item",text:"Select a connection"}),e.connections.map((function(e,t){return Object(a.jsx)(Te.a,{value:e.id,text:e.id},t)}))]})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(ye.a,{onChange:e.handleSelectContact,defaultValue:"placeholder-item",hideLabel:!0,children:[Object(a.jsx)(Te.a,{disabled:!0,hidden:!0,value:"placeholder-item",text:"Select a contact list"}),e.contacts.map((function(e,t){return Object(a.jsx)(Te.a,{value:e.id,text:e.id},t)}))]}),Object(a.jsx)("br",{}),Object(a.jsx)(Y.a,{type:"number",value:e.cooldown,onChange:e.handleSelectCooldown,labelText:"Cooldown (seconds)"})]})]})}));var ke=Object(L.b)((function(e){return{textMessageVariants:e.textMessageVariants,contacts:e.firestore.ordered.contacts,connections:e.firestore.ordered.connections,uid:e.firebase.auth.uid,token:e.firebase.profile.token.token}}),(function(e){return{changeNav:function(t){return e(M(t))},createVariant:function(t){return e(je(t))},deleteVariant:function(t){return e(be(t))},editVariant:function(t,n){return e(function(e,t){return{type:"EDIT_TEXT",data:{index:e,body:t.body,textState:t.textState}}}(t,n))},deleteAll:function(){return e({type:"DELETE_ALL_TEXT"})},setActiveVariant:function(t){return e(function(e){return{type:"SET_TEXT_ACTIVE",data:e}}(t))}}}))((function(e){Object(s.useEffect)((function(){e.deleteAll()}),[]);var t=Object(u.g)(),n=Object(j.useFirebase)(),c=n.database(),r=Object(s.useState)(""),i=Object(d.a)(r,2),o=i[0],l=i[1],b=Object(s.useState)(""),h=Object(d.a)(b,2),O=h[0],x=h[1],p=Object(s.useState)("10"),f=Object(d.a)(p,2),v=f[0],m=f[1],g=Object(s.useState)([]),C=Object(d.a)(g,2),y=C[0],T=C[1],S=Object(s.useState)(!1),k=Object(d.a)(S,2),E=k[0],M=k[1],A=Object(s.useState)([]),w=Object(d.a)(A,2),I=w[0],N=w[1],D=Object(s.useState)(!1),L=Object(d.a)(D,2),_=L[0],F=L[1],V=Object(s.useState)({variables:["Contact list is not selected"]}),P=Object(d.a)(V,2),R=P[0],X=P[1];Object(s.useEffect)((function(){!function(){var e=Math.floor(290/(2+parseInt(v)));console.log("Message amount: ",e),console.log("Contact length: ",R.length);for(var t=e>R.length?1:Math.floor(R.length/e),n=e>R.length?0:Math.floor(R.length%e),c=[],a=0,s=0;s<t;s++)e>R.length?c.push([0,R.length]):c.push([s*e,(s+1)*e]),a=(s+1)*e;0!==n&&c.push([a,a+n]),T(c),console.log("tmpInterval: ",c)}()}),[R,v,o]);var G=function(){var t=Object(re.a)(se.a.mark((function t(n){var c;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=e.contacts.find((function(e){return e.id===n.target.value})),console.log("Contact!",c),X(c),x(n.target.value);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(){c.ref("user/".concat(e.uid)).remove(),c.ref("user/".concat(e.uid,"/message")).on("value",(function(e){if(e.exists()){var t=e.val();N(t),M(!1),F(!_)}}))},Q=function(){var t=Object(re.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N([]),t.next=3,c.ref("user/".concat(e.uid,"/message")).remove();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=Object(re.a)(se.a.mark((function t(){var c,a,s;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M(!0),Z(),c=e.textMessageVariants.variants.map((function(e){return e.body})),a=0;case 4:if(!(a<y.length)){t.next=13;break}return t.next=7,n.auth().currentUser.getIdTokenResult(!0);case 7:return s=t.sent,t.next=10,fetch("https://us-central1-connectivitys-2066c.cloudfunctions.net/api/sendSingleMessages/",{method:"POST",body:JSON.stringify({uid:e.uid,contactId:O,connectionId:o,variants:{variants:c},token:s.token,cooldown:1e3*v,contactsInterval:y[a],isFirst:0===a}),headers:{"Content-Type":"application/json"}}).catch((function(e){return console.log(e)}));case 10:a++,t.next=4;break;case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.useFirestoreConnect)([{collection:"user",doc:e.uid,subcollections:[{collection:"contacts"}],storeAs:"contacts"},{collection:"user",doc:e.uid,subcollections:[{collection:"credentials"}],storeAs:"connections"}]),_?Object(a.jsx)(J.a,{open:_,passiveModal:!0,onRequestClose:function(){Q(),e.changeNav("dashboard"),t.push("/app/dashboard")},modalHeading:"Dispatch status",hasForm:!0,children:Object(a.jsxs)(B.a,{children:[Object(a.jsx)(U.a,{children:Object(a.jsxs)(z.a,{children:[Object(a.jsx)(H.a,{}),Object(a.jsx)(H.a,{children:"Phone "}),Object(a.jsx)(H.a,{children:"Message "})]})}),Object(a.jsx)(q.a,{children:I.map((function(e,t){return Object(a.jsxs)(z.a,{children:[Object(a.jsxs)(W.a,{children:[t," "]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(me.a,{status:e.sendStatus,description:e.receiverNumber})}),Object(a.jsx)(W.a,{children:Object(a.jsxs)(ge.a,{children:[Object(a.jsx)("p",{}),Object(a.jsx)(ge.b,{children:Object(a.jsx)("p",{children:e.message})})]})})]},t)}))})]})}):Object(a.jsxs)("div",{className:"send-text-message",children:[E?Object(a.jsx)(K.a,{}):null,Object(a.jsx)(Se,{handleSelectContact:G,handleSelectConnection:function(e){l(e.target.value)},handleSelectCooldown:function(e){m(e.target.value)},cooldown:v}),e.textMessageVariants.variants.map((function(t,n){return Object(a.jsx)("div",{onClick:function(){return e.setActiveVariant(n)},children:Object(a.jsx)(Oe,{editVariant:e.editVariant,variables:R.variables,editorIndex:n,textState:t.textState,open:t.active},n)})})),Object(a.jsx)(ve,{messageType:"text"}),e.textMessageVariants.variants.length>0?Object(a.jsx)(ee.a,{kind:"primary",style:{marginTop:"64px"},renderIcon:Ce.b,onClick:Y,children:"Send Messages"}):null]})})),Ee=n(252),Me=n(253),Ae=n(284),we=(n(451),n(279));n(452);var Ie=Object(L.b)((function(e){return{uid:e.firebase.auth.uid}}),(function(e){return{createVariant:function(t){return e(xe(t))},deleteVariant:function(t){return e(pe(t))},deleteAll:function(){return e({type:"DELETE_ALL_MEDIA_TEXT"})},setActiveVariant:function(t){return e(fe(t))},setMediaPath:function(t){return e(function(e){return{type:"SET_MEDIA_PATH",data:e}}(t))},setMediaType:function(t){return e({type:"SET_MEDIA_TYPE",data:t})}}}))((function(e){var t=Object(j.useFirebase)(),n=Object(s.useState)("upload"),c=Object(d.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)("#"),l=Object(d.a)(o,2),u=l[0],b=l[1],h=Object(s.useState)("#"),O=Object(d.a)(h,2),x=O[0],p=O[1],f=Object(s.useState)("#"),v=Object(d.a)(f,2),m=v[0],g=v[1],C=Object(s.useState)({}),y=Object(d.a)(C,2),T=y[0],S=y[1],k=Object(s.useState)(""),E=Object(d.a)(k,2),M=E[0],A=E[1],w=Object(s.useState)({isOn:!1,message:""}),I=Object(d.a)(w,2),N=I[0],D=I[1],L=function(){var n=Object(re.a)(se.a.mark((function n(c,a){var s,r,o,d,l;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=a.addedFiles,r=s[0],o=1e-6*r.size,d="application/pdf"===r.type||"image/jpg"===r.type||"audio/mpeg"===r.type||"video/mp4"===r.type||"image/jpeg"===r.type,D(o>2.5?{isOn:!0,message:"File size must be less than 2.5mb"}:d?{isOn:!1,message:""}:{isOn:!0,message:"Incorrect file format. ".concat(r.type," not allowed")}),l=function(){var n=Object(re.a)(se.a.mark((function n(){return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.uploadFile("user/".concat(e.uid,"/media"),r);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),A(r.name),i("loading"),n.t0=r.type,n.next="application/pdf"===n.t0?11:"image/jpeg"===n.t0?27:"image/jpg"===n.t0?43:"audio/mpeg"===n.t0?58:"video/mp4"===n.t0?74:90;break;case 11:if(!(o>2.5)&&d){n.next=18;break}return i("upload"),e.setAddText(!1),e.setSendMessage(!1),n.abrupt("break",94);case 18:return e.setMediaPath(r.name),n.next=21,l();case 21:return S(r.name),e.setMediaType("document"),e.setSendMessage(!0),e.setAddText(!1),i("document"),n.abrupt("break",94);case 27:if(!(o>2.5)&&d){n.next=34;break}return i("upload"),e.setAddText(!1),e.setSendMessage(!1),n.abrupt("break",94);case 34:return e.setMediaPath(r.name),n.next=37,l();case 37:return b(URL.createObjectURL(r)),e.setMediaType("image"),e.setAddText(!0),e.setSendMessage(!0),i("image"),n.abrupt("break",94);case 43:if(!(o>2.5)&&d){n.next=50;break}return i("upload"),e.setAddText(!1),e.setSendMessage(!1),n.abrupt("break",94);case 50:return e.setMediaPath(r.name),n.next=53,l();case 53:return b(URL.createObjectURL(r)),e.setMediaType("image"),e.setSendMessage(!0),i("image"),n.abrupt("break",94);case 58:if(!(o>2.5)&&d){n.next=65;break}return i("upload"),e.setAddText(!1),e.setSendMessage(!1),n.abrupt("break",94);case 65:return e.setMediaPath(r.name),n.next=68,l();case 68:return p(URL.createObjectURL(r)),e.setMediaType("audio"),e.setAddText(!1),e.setSendMessage(!0),i("audio"),n.abrupt("break",94);case 74:if(!(o>2.5)&&d){n.next=81;break}return i("upload"),e.setAddText(!1),e.setSendMessage(!1),n.abrupt("break",94);case 81:return e.setMediaPath(r.name),n.next=84,l();case 84:return g(URL.createObjectURL(r)),e.setMediaType("video"),e.setAddText(!0),e.setSendMessage(!0),i("video"),n.abrupt("break",94);case 90:return i("upload"),e.setAddText(!1),e.setSendMessage(!1),n.abrupt("break",94);case 94:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),_=function(){var n=Object(re.a)(se.a.mark((function n(){var c;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.storage().ref("user/".concat(e.uid,"/media/").concat(M)),n.next=3,c.delete();case 3:e.setSendMessage(!1),e.setMediaPath(""),e.deleteAll(),i("upload");case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),F=function(){var n=Object(re.a)(se.a.mark((function n(){var c;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.storage().ref("user/".concat(e.uid,"/media/").concat(M)),n.next=3,c.delete();case 3:e.setSendMessage(!1),e.setMediaPath(""),e.deleteAll(),i("upload");case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),V=function(){var n=Object(re.a)(se.a.mark((function n(){var c;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.storage().ref("user/".concat(e.uid,"/media/").concat(M)),n.next=3,c.delete();case 3:e.setSendMessage(!1),e.setMediaPath(""),e.deleteAll(),i("upload");case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),P=function(){var n=Object(re.a)(se.a.mark((function n(){var c;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.storage().ref("user/".concat(e.uid,"/media/").concat(M)),n.next=3,c.delete();case 3:e.setSendMessage(!1),e.setMediaPath(""),e.deleteAll(),i("upload");case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return"image"===r?Object(a.jsxs)("div",{className:"MediaGadget",children:[Object(a.jsx)("img",{className:"image",src:u}),Object(a.jsx)("div",{className:"DeleteButton",children:Object(a.jsx)(ee.a,{iconDescription:"Delete this file",hasIconOnly:!0,renderIcon:te.a,kind:"secondary",size:"sm",onClick:V})})]}):"document"===r?Object(a.jsx)("div",{className:"MediaGadget",children:Object(a.jsx)(Ee.a,{name:T,status:"edit",onDelete:P})}):"video"===r?Object(a.jsxs)("div",{className:"MediaGadget",children:[Object(a.jsx)(we.DefaultPlayer,{loop:!0,controls:["PlayPause","Seek","Time","Volume"],children:Object(a.jsx)("source",{src:m,type:"video/mp4"})}),Object(a.jsx)("div",{className:"DeleteButton",children:Object(a.jsx)(ee.a,{iconDescription:"Delete this file",hasIconOnly:!0,renderIcon:te.a,kind:"secondary",size:"sm",onClick:_})})]}):"audio"===r?Object(a.jsxs)("div",{className:"MediaGadget",children:[Object(a.jsx)(Ae.a,{src:x}),Object(a.jsx)("div",{className:"DeleteButton",children:Object(a.jsx)(ee.a,{iconDescription:"Delete this file",hasIconOnly:!0,renderIcon:te.a,kind:"secondary",size:"sm",onClick:F})})]}):"loading"===r?Object(a.jsx)("div",{className:"MediaGadget",children:Object(a.jsx)(K.a,{withOverlay:!1})}):"upload"===r?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"MediaGadget",children:Object(a.jsx)(Me.a,{labelText:"Drop your media file here",onAddFiles:L,accept:["application/pdf","image/png","image/jpg","image/jpeg","audio/mpeg","video/mp4"]})}),N.isOn?Object(a.jsx)("div",{className:"Warn",children:Object(a.jsx)(Q.a,{kind:"warning",title:N.message})}):null]}):Object(a.jsx)("div",{className:"MediaGadget",children:Object(a.jsx)(Me.a,{labelText:"Drop your media file here"})})}));var Ne=Object(L.b)((function(e){return{mediaMessageVariants:e.mediaMessageVariants,contacts:e.firestore.ordered.contacts,connections:e.firestore.ordered.connections,uid:e.firebase.auth.uid,token:e.firebase.profile.token.token}}),(function(e){return{changeNav:function(t){return e(M(t))},createVariant:function(t){return e(xe(t))},deleteVariant:function(t){return e(pe(t))},editVariant:function(t,n){return e(function(e,t){return{type:"EDIT_MEDIA_TEXT",data:{index:e,body:t.body,textState:t.textState}}}(t,n))},deleteAll:function(){return e({type:"DELETE_ALL_MEDIA_TEXT"})},setActiveVariant:function(t){return e(fe(t))}}}))((function(e){Object(s.useEffect)((function(){e.deleteAll()}),[]);var t=Object(j.useFirebase)(),n=t.database(),c=Object(u.g)(),r=Object(s.useState)(""),i=Object(d.a)(r,2),o=i[0],l=i[1],b=Object(s.useState)(""),h=Object(d.a)(b,2),O=h[0],x=h[1],p=Object(s.useState)("10"),f=Object(d.a)(p,2),v=f[0],m=f[1],g=Object(s.useState)([]),C=Object(d.a)(g,2),y=C[0],T=C[1],S=Object(s.useState)(""),k=Object(d.a)(S,2),E=(k[0],k[1],Object(s.useState)(!1)),M=Object(d.a)(E,2),A=M[0],w=M[1],I=(Object(s.useRef)(null),Object(s.useState)([])),N=Object(d.a)(I,2),D=N[0],L=N[1],_=Object(s.useState)(!1),F=Object(d.a)(_,2),V=F[0],P=F[1],R=Object(s.useState)(!1),X=Object(d.a)(R,2),G=X[0],Z=X[1],Q=Object(s.useState)(!1),Y=Object(d.a)(Q,2),$=Y[0],te=Y[1],ne=Object(s.useState)({id:"contact",variables:["Contact list is not selected"],length:1}),ce=Object(d.a)(ne,2),ae=ce[0],ie=ce[1];Object(s.useEffect)((function(){oe()}),[ae,v,o]),Object(s.useEffect)((function(){console.log(y)}),[y]);var oe=function(){var e=Math.floor(290/(5+parseInt(v)));console.log("Message amount: ",e),console.log("Contact length: ",ae.length);for(var t=e>ae.length?1:Math.floor(ae.length/e),n=e>ae.length?0:Math.floor(ae.length%e),c=[],a=0,s=0;s<t;s++)e>ae.length?c.push([0,ae.length]):c.push([s*e,(s+1)*e]),a=(s+1)*e;0!==n&&c.push([a,a+n]),T(c),console.log("tmpInterval: ",c)},de=function(){var t=Object(re.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L([]),t.next=3,n.ref("user/".concat(e.uid,"/mediaMessage")).remove();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),le=function(){P(!V)},ue=function(){var c=Object(re.a)(se.a.mark((function c(){var a,s,r;return se.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:w(!0),n.ref("user/".concat(e.uid,"/mediaMessage")).remove(),n.ref("user/".concat(e.uid,"/mediaMessage")).on("value",(function(t){if(t.exists()){var n=t.val();L(n),w(!1),le(),e.deleteAll()}})),a=!1,s=0;case 4:if(!(s<y.length)){c.next=14;break}if(a){c.next=11;break}return c.next=8,t.auth().currentUser.getIdToken(!0);case 8:return r=c.sent,c.next=11,fetch("https://us-central1-connectivitys-2066c.cloudfunctions.net/api/sendSingleMediaMessage/",{method:"POST",body:JSON.stringify({uid:e.uid,contactId:O,connectionId:o,variants:e.mediaMessageVariants,token:r,cooldown:1e3*v,contactsInterval:y[s],isFirst:0===s,isLast:s===y.length-1}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){a=!0,console.log("Error response from server: ",e)}));case 11:s++,c.next=4;break;case 14:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();return Object(j.useFirestoreConnect)([{collection:"user",doc:e.uid,subcollections:[{collection:"contacts"}],storeAs:"contacts"},{collection:"user",doc:e.uid,subcollections:[{collection:"credentials"}],storeAs:"connections"}]),V?Object(a.jsx)(J.a,{open:V,passiveModal:!0,onRequestClose:function(){de(),e.changeNav("dashboard"),c.push("/app/dashboard")},modalHeading:"Dispatch status",hasForm:!0,children:Object(a.jsxs)(B.a,{children:[Object(a.jsx)(U.a,{children:Object(a.jsxs)(z.a,{children:[Object(a.jsx)(H.a,{}),Object(a.jsx)(H.a,{children:"Phone "}),Object(a.jsx)(H.a,{children:"Message "})]})}),Object(a.jsx)(q.a,{children:D.map((function(e,t){return Object(a.jsxs)(z.a,{children:[Object(a.jsxs)(W.a,{children:[t," "]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(me.a,{status:e.sendStatus,description:e.receiverNumber})}),Object(a.jsx)(W.a,{children:Object(a.jsxs)(ge.a,{children:[Object(a.jsx)("p",{}),Object(a.jsx)(ge.b,{children:Object(a.jsx)("p",{children:e.message})})]})})]},t)}))})]})}):Object(a.jsxs)("div",{className:"send-text-message",children:[A?Object(a.jsx)(K.a,{}):null,Object(a.jsx)(Se,{handleSelectContact:function(t){var n=e.contacts.find((function(e){return e.id===t.target.value}));x(t.target.value),ie(n)},handleSelectConnection:function(e){l(e.target.value)},handleSelectCooldown:function(e){m(e.target.value)},cooldown:v}),Object(a.jsx)(Ie,{setAddText:te,setSendMessage:Z}),G?Object(a.jsxs)(s.Fragment,{children:[e.mediaMessageVariants.variants.map((function(t,n){return Object(a.jsx)("div",{onClick:function(){return e.setActiveVariant(n)},children:Object(a.jsx)(Oe,{editVariant:e.editVariant,variables:ae.variables,editorIndex:n,textState:t.textState,open:t.active},n)})})),$?Object(a.jsx)(ve,{messageType:"media"}):null,Object(a.jsx)(ee.a,{kind:"primary",style:{marginTop:"64px"},renderIcon:Ce.b,onClick:ue,children:"Send Messages"})]}):null]})})),De=n(280);var Le=Object(L.b)((function(e){return{uid:e.firebase.auth.uid,token:e.firebase.profile.token.token}}),(function(e){return{changeNav:function(t){return e(M(t))}}}))((function(e){var t=Object(u.g)(),n=Object(s.useState)(""),c=Object(d.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)(""),l=Object(d.a)(o,2),b=l[0],h=l[1],O=Object(j.useFirebase)().database(),x=function(){C("loading"),O.ref("user/".concat(e.uid,"/QR")).on("value",(function(e){if(e.exists()){console.log("QR ADDED!: ",e.val());var t=e.val();i(""),h(t.qrCode),m("qr")}})),fetch("https://us-central1-connectivitys-2066c.cloudfunctions.net/api/createNewConnection/",{method:"POST",mode:"cors",body:JSON.stringify({uid:e.uid,connectionName:r,token:e.token}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){g()}))},p=Object(s.useState)("name"),f=Object(d.a)(p,2),v=f[0],m=f[1],g=function(){e.changeNav("dashboard"),t.push("app/dashboard")},C=function(e){m(e)};switch(v){case"name":return Object(a.jsxs)(J.a,{onRequestSubmit:Object(re.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x();case 1:case"end":return e.stop()}}),e)}))),hasForm:!0,open:!0,modalHeading:Object(a.jsx)("h2",{children:" Create new connection"}),primaryButtonText:"Create",children:[Object(a.jsx)("br",{}),Object(a.jsx)(Y.a,{onChange:function(e){i(e.target.value)},labelText:"Connection's name",value:r})]});case"loading":return Object(a.jsx)(K.a,{});case"qr":return Object(a.jsxs)(J.a,{hasForm:!0,passiveModal:!0,open:!0,modalHeading:Object(a.jsx)("h2",{children:"Scan the code"}),children:[Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:" Open whatsapp and scan the QR code"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(a.jsx)(De,{value:b})})]});default:return null}})),_e=n(542);var Fe=Object(L.b)((function(e){return{uid:e.firebase.auth.uid,token:e.firebase.profile.token.token}}),(function(e){return{changeNav:function(t){return e(M(t))}}}))((function(e){var t=Object(j.useFirebase)(),n=Object(u.g)(),c=Object(s.useState)("file"),r=Object(d.a)(c,2),i=r[0],o=(r[1],Object(s.useState)("uploading")),l=Object(d.a)(o,2),b=l[0],h=l[1],O=function(){var n=Object(re.a)(se.a.mark((function n(c){var a;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=c.target.files[0],n.next=3,t.uploadFile("user/".concat(e.uid,"/contacts"),a).catch((function(e){return console.log(e)}));case 3:return n.next=5,fetch("https://us-central1-connectivitys-2066c.cloudfunctions.net/api/validateSingleContact/",{method:"POST",body:JSON.stringify({uid:e.uid,contactName:a.name,token:e.token}),headers:{"Content-Type":"application/json"}}).catch((function(e){return console.log(e)}));case 5:h("complete");case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();switch(i){case"loading":return Object(a.jsx)(K.a,{});case"file":return Object(a.jsxs)(J.a,{onRequestSubmit:function(){e.changeNav("dashboard"),n.push("/app/dashboard")},open:!0,modalHeading:Object(a.jsx)("h2",{children:"Upload your csv"}),primaryButtonText:"Done",children:[Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"Upload your csv here. Remember that the first column\u2019s header must be \u201cphone\u201d (without quotes) and all it\u2019s cells must be user\u2019s phone number with its country code (ex: 59594123456)."}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(a.jsx)(_e.a,{filenameStatus:b,buttonLabel:"Add file",onChange:O})})]});default:return null}})),Ve=n(41);n(458);var Pe=Object(L.b)((function(e){return{auth:e.firebase.auth}}))((function(e){return Object(a.jsx)(Ve.a,{children:Object(a.jsxs)(u.d,{children:[Object(a.jsxs)(u.b,{path:"/login",children:[e.auth.isEmpty?Object(a.jsx)(g,{}):Object(a.jsx)(u.a,{to:"/app/dashboard"}),Object(a.jsx)(o.a,{className:"content",children:Object(a.jsx)($,{})})]}),Object(a.jsxs)(u.b,{path:"/app",children:[Object(a.jsx)(g,{}),Object(a.jsx)(_,{}),e.auth.isEmpty?Object(a.jsx)(u.a,{to:"/login"}):Object(a.jsx)(o.a,{className:"content",children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:"/app/create-new-connection",children:Object(a.jsx)(Le,{})}),Object(a.jsx)(u.b,{path:"/app/create-new-contact",children:Object(a.jsx)(Fe,{})}),Object(a.jsx)(u.b,{path:"/app/dashboard",children:Object(a.jsx)(G,{})}),Object(a.jsx)(u.b,{path:"/app/send-text-message",children:Object(a.jsx)(ke,{})}),Object(a.jsx)(u.b,{path:"/app/send-media-message",children:Object(a.jsx)(Ne,{})}),Object(a.jsx)(u.b,{path:"/app/connection-status/:id",children:Object(a.jsx)(ne,{})}),Object(a.jsx)(u.b,{path:"/app/contact-status/:id",children:Object(a.jsx)(ce,{})}),Object(a.jsx)(u.b,{path:"*",children:Object(a.jsx)(u.a,{to:"/app/dashboard"})})]})})]}),Object(a.jsx)(u.b,{path:"*",children:Object(a.jsx)(u.a,{to:"/app/dashboard"})})]})})})),Re=(n(459),n(63)),Xe=n(89),Be={variants:[]},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_ACTIVE":return Object(c.a)(Object(c.a)({},e),{},{variants:e.variants.map((function(e,n){return n===t.data?Object(c.a)(Object(c.a)({},e),{},{active:!0}):Object(c.a)(Object(c.a)({},e),{},{active:!1})}))});case"CREATE_TEXT":var n=e.variants.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{active:!1})}));return Object(c.a)(Object(c.a)({},e),{},{variants:n.concat(t.data)});case"EDIT_TEXT":return{variants:e.variants.map((function(e,n){return n===t.data.index?{body:t.data.body,textState:t.data.textState,active:!0}:e}))};case"DELETE_TEXT":return Object(c.a)(Object(c.a)({},e),{},{variants:e.variants.filter((function(e,t){return 0!==t}))});default:return Object(c.a)({},e);case"DELETE_ALL_TEXT":return Object(c.a)(Object(c.a)({},e),{},{variants:[]})}},ze={variants:[]},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MEDIA_TEXT_ACTIVE":return Object(c.a)(Object(c.a)({},e),{},{variants:e.variants.map((function(e,n){return n===t.data?Object(c.a)(Object(c.a)({},e),{},{active:!0}):Object(c.a)(Object(c.a)({},e),{},{active:!1})}))});case"SET_MEDIA_PATH":return Object(c.a)(Object(c.a)({},e),{},{mediaPath:t.data});case"SET_MEDIA_TYPE":return Object(c.a)(Object(c.a)({},e),{},{mediaType:t.data});case"CREATE_MEDIA_TEXT":var n=e.variants.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{active:!1})}));return Object(c.a)(Object(c.a)({},e),{},{variants:n.concat(t.data)});case"EDIT_MEDIA_TEXT":return Object(c.a)(Object(c.a)({},e),{},{variants:e.variants.map((function(e,n){return n===t.data.index?{body:t.data.body,textState:t.data.textState,active:!0}:e}))});case"DELETE_MEDIA_TEXT":return Object(c.a)(Object(c.a)({},e),{},{variants:e.variants.filter((function(e,t){return 0!==t}))});default:return Object(c.a)({},e);case"DELETE_ALL_MEDIA_TEXT":return Object(c.a)(Object(c.a)({},e),{},{variants:[]})}},qe={activeTab:"dashboard"},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE":return{activeTab:t.data};default:return e}},Ge=Object(Re.combineReducers)({firebase:j.firebaseReducer,firestore:Xe.firestoreReducer,sideNav:We,textMessageVariants:Ue,mediaMessageVariants:He}),Je=n(281),Ze={apiKey:"AIzaSyAXsdOOxF8isFcNw-H-jxeWDy2OoLzTb1A",authDomain:"connectivitys-2066c.firebaseapp.com",databaseURL:"https://connectivitys-2066c.firebaseio.com",projectId:"connectivitys-2066c",storageBucket:"connectivitys-2066c.appspot.com",messagingSenderId:"1061761115877",appId:"1:1061761115877:web:635e0fa726dc8b1833160c"},Qe=n(107),Ye=(n(491),n(493),n(498),n(499),n(495),n(282));Qe.a.initializeApp(Ze),Qe.a.firestore();var Ke=Object(Re.createStore)(Ge,Object(Ye.composeWithDevTools)(Object(Re.applyMiddleware)(Je.a.withExtraArgument({getFirebase:j.getFirebase,getFirestore:Xe.getFirestore})),Object(Xe.reduxFirestore)(Qe.a,Ze))),$e={firebase:Qe.a,config:{userProfile:"users",enableClaims:!0},dispatch:Ke.dispatch,createFirestoreInstance:Xe.createFirestoreInstance,useFirestoreForProfile:!0};i.a.render(Object(a.jsx)(L.a,{store:Ke,children:Object(a.jsx)(j.ReactReduxFirebaseProvider,Object(c.a)(Object(c.a)({},$e),{},{children:Object(a.jsx)(Pe,{})}))}),document.getElementById("root"))}},[[497,1,2]]]);
//# sourceMappingURL=main.efff8568.chunk.js.map